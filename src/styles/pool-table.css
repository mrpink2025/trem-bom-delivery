/* Pool Table Styles - Professional 8-Ball Renderer */

.pool-table-container {
  @apply relative w-full max-w-6xl mx-auto;
  aspect-ratio: 2 / 1;
  min-height: 350px; /* Increased for larger balls */
  max-height: 75vh; /* More space for enhanced visuals */
}

.pool-table {
  @apply w-full h-full bg-background border-2 border-border rounded-xl shadow-2xl overflow-hidden;
  box-shadow: 
    0 25px 50px -12px rgba(0, 0, 0, 0.4), /* Enhanced shadow depth */
    0 0 0 1px rgba(139, 69, 19, 0.3) inset, /* Wood-like border */
    0 8px 32px rgba(0, 0, 0, 0.2); /* Additional ambient shadow */
}

.pool-canvas {
  @apply w-full h-full block;
  image-rendering: auto; /* Better rendering for smooth animations */
  image-rendering: -webkit-optimize-contrast;
}

/* Pool HUD Overlay */
.pool-hud {
  @apply absolute inset-0 pointer-events-none;
}

.pool-hud-top {
  @apply absolute top-0 left-0 right-0 p-4 flex justify-between items-center;
  background: linear-gradient(180deg, rgba(0, 0, 0, 0.6) 0%, transparent 100%);
}

.pool-hud-bottom {
  @apply absolute bottom-0 left-0 right-0 p-4 flex justify-center;
  background: linear-gradient(0deg, rgba(0, 0, 0, 0.6) 0%, transparent 100%);
}

/* Player Turn Indicator */
.pool-turn-indicator {
  @apply flex items-center gap-2 px-3 py-2 rounded-full;
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(8px);
}

.pool-turn-dot {
  @apply w-2 h-2 rounded-full;
  background: hsl(var(--primary));
  box-shadow: 0 0 8px hsl(var(--primary));
}

.pool-turn-text {
  @apply text-sm font-medium text-white;
  font-family: 'Inter', 'Montserrat', sans-serif;
}

/* Shot Clock */
.pool-shot-clock {
  @apply flex items-center gap-2 px-3 py-2 rounded-full text-white;
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(8px);
}

.pool-shot-clock.warning {
  @apply animate-pulse;
  background: rgba(239, 68, 68, 0.7);
}

.pool-shot-clock-icon {
  @apply w-4 h-4;
}

.pool-shot-clock-text {
  @apply text-sm font-mono font-bold;
}

/* Ball Score Display */
.pool-score {
  @apply flex items-center gap-4 px-4 py-2 rounded-full;
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(8px);
}

.pool-score-group {
  @apply flex items-center gap-2;
}

.pool-score-label {
  @apply text-xs font-medium text-white/80 uppercase tracking-wide;
}

.pool-score-balls {
  @apply flex gap-1;
}

.pool-score-ball {
  @apply w-4 h-4 rounded-full border border-white/20;
  filter: grayscale(1) opacity(0.4);
  transition: all 0.2s ease;
}

.pool-score-ball.pocketed {
  filter: grayscale(0) opacity(1);
  transform: scale(1.1);
}

/* Loading States */
.pool-loading {
  @apply absolute inset-0 flex flex-col items-center justify-center bg-background/80 backdrop-blur-sm;
}

/* Mobile optimizations */
@media (max-width: 768px) {
  .pool-hud-bottom .pool-turn-text {
    @apply text-xs;
  }
  
  .pool-table-container {
    @apply mx-2;
  }
}

.pool-loading-spinner {
  @apply w-8 h-8 border-2 border-white/20 border-t-white rounded-full;
  animation: spin 1s linear infinite;
}

.pool-loading-text {
  @apply mt-4 text-white/80 text-sm font-medium;
}

/* Game Actions */
.pool-actions {
  @apply absolute bottom-4 right-4 flex gap-2;
}

.pool-action-button {
  @apply px-4 py-2 bg-primary text-primary-foreground rounded-full font-medium text-sm;
  @apply hover:bg-primary/90 transition-colors;
  @apply shadow-lg shadow-primary/20;
  pointer-events: auto;
}

.pool-action-button:disabled {
  @apply opacity-50 cursor-not-allowed;
}

/* Responsive Design */
@media (max-width: 768px) {
  .pool-table-container {
    max-height: 60vh; /* Increased for better ball visibility */
    min-height: 280px; /* Larger minimum for bigger balls */
  }
  
  .pool-hud-top,
  .pool-hud-bottom {
    @apply p-2;
  }
  
  .pool-turn-indicator,
  .pool-shot-clock,
  .pool-score {
    @apply px-2 py-1;
  }
  
  .pool-turn-text,
  .pool-shot-clock-text {
    @apply text-xs;
  }
  
  .pool-score-ball {
    @apply w-3 h-3;
  }
  
  .pool-actions {
    @apply bottom-2 right-2;
  }
  
  .pool-action-button {
    @apply px-3 py-1 text-xs;
  }
}

@media (max-width: 480px) {
  .pool-table-container {
    max-height: 50vh; /* Increased for mobile visibility */
    min-height: 250px; /* Ensure playable size on small screens */
  }
  
  .pool-score {
    @apply flex-col gap-1;
  }
  
  .pool-score-group {
    @apply gap-1;
  }
}

/* Animations */
@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/* High DPI Support */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .pool-canvas {
    image-rendering: auto;
  }
}

/* Focus and Accessibility */
.pool-action-button:focus-visible {
  @apply outline-none ring-2 ring-primary ring-offset-2 ring-offset-background;
}

.pool-hud [role="status"] {
  @apply sr-only;
}

/* Dark mode adjustments */
@media (prefers-color-scheme: dark) {
  .pool-table {
    box-shadow: 
      0 25px 50px -12px rgba(0, 0, 0, 0.5),
      0 0 0 1px rgba(255, 255, 255, 0.1) inset;
  }
}

/* Legacy Pool Table Styles (for backward compatibility) */
.pool-table.legacy {
  position: relative;
  width: 100%;
  max-width: 860px;
  aspect-ratio: 2 / 1;
  margin: 12px auto;
  background: #0f2a24;
  border-radius: 12px;
  box-shadow:
    inset 0 0 0 10px #4b1f0e,
    inset 0 0 0 18px #2a0f08,
    0 18px 60px rgba(0,0,0,.35);
  pointer-events: none;
}

.pool-table.legacy .pocket {
  position: absolute; 
  width: 32px; 
  height: 32px; 
  border-radius: 50%;
  background: radial-gradient(circle at 40% 40%, #000 0%, #000 60%, #222 100%);
  box-shadow: inset 0 0 18px rgba(0,0,0,.8);
}

.pocket.tl { top: -8px; left: -8px; }
.pocket.tr { top: -8px; right: -8px; }
.pocket.bl { bottom: -8px; left: -8px; }
.pocket.br { bottom: -8px; right: -8px; }
.pocket.tc, .pocket.bc { left: 50%; transform: translateX(-50%); }
.pocket.tc { top: -10px; }
.pocket.bc { bottom: -10px; }

.pool-ball {
  width: 16px; 
  height: 16px; 
  border-radius: 50%;
  background: radial-gradient(circle at 30% 25%, #fff, #eee 35%, #c9c9c9 60%, #999 100%);
  box-shadow: 0 2px 6px rgba(0,0,0,.3);
  position: absolute;
  transition: all 0.1s ease-out;
}

.pool-ball.cue { background: radial-gradient(circle at 30% 25%, #fff, #f8f8f8 35%, #e0e0e0 60%, #c0c0c0 100%); }
.pool-ball.solid-1 { background: radial-gradient(circle at 30% 25%, #ffff99, #ffff00 35%, #e6e600 60%, #cccc00 100%); }
.pool-ball.solid-2 { background: radial-gradient(circle at 30% 25%, #6666ff, #0000ff 35%, #0000e6 60%, #0000cc 100%); }
.pool-ball.solid-3 { background: radial-gradient(circle at 30% 25%, #ff6666, #ff0000 35%, #e60000 60%, #cc0000 100%); }
.pool-ball.solid-4 { background: radial-gradient(circle at 30% 25%, #cc99ff, #800080 35%, #730073 60%, #660066 100%); }
.pool-ball.solid-5 { background: radial-gradient(circle at 30% 25%, #ff9933, #ff6600 35%, #e65c00 60%, #cc5200 100%); }
.pool-ball.solid-6 { background: radial-gradient(circle at 30% 25%, #66ff66, #00aa00 35%, #009900 60%, #008800 100%); }
.pool-ball.solid-7 { background: radial-gradient(circle at 30% 25%, #9966cc, #660066 35%, #5c005c 60%, #520052 100%); }
.pool-ball.eight { background: radial-gradient(circle at 30% 25%, #333, #000 35%, #000 60%, #000 100%); }

@keyframes ball-impact {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}

.pool-ball.impact {
  animation: ball-impact 0.2s ease-out;
}